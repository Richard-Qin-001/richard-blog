{% load static %}
<html>

    <head>
        <title>Python Dev Blog</title>
        <link rel="stylesheet" href="{% static 'css/blog.css' %}">

        <meta name="viewport" content="width=device-width, initial-scale=1">

        <script>
            window.MathJax = {
                tex: {
                    inlineMath: [['$', '$']],
                    displayMath: [['$$', '$$']]
                }
            };
        </script>
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </head>

    <body>
        <header style="background-color: #2c3e50; padding: 15px 0;">
            <div class="container">
                <h1><a href="/" style="color: white; text-decoration: none;">Python Dev Blog</a></h1>
        
                <nav class="user-nav">
                    {% if user.is_authenticated %}
                        <span class="welcome-text">æ¬¢è¿, $ {{ user.username }} $ !</span>

                        <span class="user-role"
                            style="background: rgba(255,255,255,0.2); padding: 2px 8px; border-radius: 12px; font-size: 0.8em; margin-left: 5px;">
                            {% if user.is_superuser %}
                                ğŸ‘‘ Administrators (Root)
                            {% elif perms.blog.add_post %}
                                ğŸ›¡ï¸ Administrators
                            {% elif perms.blog.add_comment %}
                                ğŸ‘¤ Users
                            {% else %}
                                ğŸ‘ï¸ Guests
                            {% endif %}
                        </span>
        
                        {% if user.is_superuser or perms.blog.add_post %}
                            <a href="{% url 'post_new' %}" class="add-post-link">+ å‘å¸ƒæ–‡ç« </a>
                        {% endif %}
            
                        <form action="{% url 'logout' %}" method="post" style="margin: 0;">
                            {% csrf_token %}
                            <button type="submit" class="logout-btn">é€€å‡º</button>
                        </form>
                    {% else %}
                        <a href="{% url 'login' %}" style="color: white; text-decoration: none;">ç™»å½•</a>
                        <a href="{% url 'signup' %}" style="color: #ffca28; margin-left: 15px; text-decoration: none;">æ³¨å†Œ</a>
                    {% endif %}
                </nav>
            </div>
        </header>

        <main class="container">
            {% if messages %}
            <div class="messages">
                {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
                {% endfor %}
            </div>
            {% endif %}
            {% block content %}
            {% endblock %}
        </main>
    </body>

</html>