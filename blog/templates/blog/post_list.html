{% extends 'blog/base.html' %}
{% load blog_tags %}

{% block content %}
    {% for post in posts %}
        <article>
            <div style="color: #7f8c8d; font-size: 0.9rem; margin-bottom: 5px;">
                ğŸ‘¤ {{ post.author.profile.nickname|default:post.author.username }}
                <span style="margin: 0 10px; color: #eee;">|</span>
                <time>å‘å¸ƒæ—¶é—´: {{ post.published_date|date:"Y-m-d" }}</time>
            </div>
        
            <h2><a href="{% url 'post_detail' pk=post.pk %}">{{ post.title }}</a></h2>
            <p>{{ post.text|markdown }}</p>
        </article>
    {% endfor %}

    <div class="tags">
        {% for tag in post.tags.all %}
        <a href="{% url 'post_list_by_tag' tag_name=tag.name %}" class="tag-badge">
            # {{ tag.name }}
        </a>
        {% endfor %}
    </div>

    {% if query %}
        <div style="margin-bottom: 20px; color: #7f8c8d;">
            <h3>ğŸ” å…³äº "{{ query }}" çš„æœç´¢ç»“æœï¼š</h3>
            <p>å…±æ‰¾åˆ° $ {{ posts.count }} $ ç¯‡æ–‡ç« </p>
            <a href="{% url 'post_list' %}" style="color: #3498db; text-decoration: none;">æ¸…é™¤æœç´¢ç»“æœ</a>
        </div>
    {% endif %}

    {% if tag %}
        <div style="margin-bottom: 20px; color: #7f8c8d;">
            <h3>ğŸ·ï¸ æ­£åœ¨æŸ¥çœ‹æ ‡ç­¾ï¼š# {{ tag.name }}</h3>
            <a href="{% url 'post_list' %}" style="color: #3498db; text-decoration: none;">æŸ¥çœ‹å…¨éƒ¨æ–‡ç« </a>
        </div>
    {% endif %}
    
    {% for post in posts %}
        {% empty %}
        <div style="text-align: center; padding: 50px 0;">
            <p style="font-size: 1.2rem; color: #bdc3c7;">æŠ±æ­‰ï¼Œæ²¡æœ‰æ‰¾åˆ°ç›¸å…³æ–‡ç«  ğŸ˜…</p>
        </div>
    {% endfor %}
{% endblock %}